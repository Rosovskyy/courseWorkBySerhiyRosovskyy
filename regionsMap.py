from gmplot import gmplot
import os

# Place map
gmap = gmplot.GoogleMapPlotter(49.839683, 24.029717, 13)


def readFile(path):
    """
    (str) -> list
    The function opens the file
    and get all data from it, storing
    it in the list
    """
    lst = []
    f = open(path, encoding="utf-8", errors="ignore")
    for i in f:
        lst.append(i)

    return lst


def putMarker(coord, color):
    """
    (tuple, str) -> Nonetype
    Using the abstract data type and
    google api, the function puts the marker
    on the map
    """
    gmap.marker(coord[0], coord[1], color=color)


def markers():
    """
    (None) -> Nonetype
    Reading some data from the file,
    the function puts the markers of
    their address on the map
    """
    utilties = readFile("courseWork/helpfulData/publicUtilities.txt")
    for i in utilties:
        lat, lon = get_location(i)
        putMarker((lat, lon), 'red')


def get_location(place):
    """
    (str) -> tuple(float, float)
    Take name of the place and return
    it's location
    """
    import requests
    url = "https://maps.googleapis.com/maps/api/geocode/json?address=1600"
    for i in place.split():
        url += '+' + i
    url += "&key=AIzaSyBZ9WWdYr5xHTci_LHkm6RaBicWYENSNRA"
    params = {'sensor': 'false', 'address': place}
    r = requests.get(url, params=params)
    result = r.json()["results"]
    location = result[0]['geometry']['location']
    return (location['lat'], location['lng'])


def main():
    """
    (None) -> Nonetype
    The main function of the program,
    which calls two another needed
    functions
    """
    buildPolygons()
    markers()

def draw():
    """
    (None) -> Nonetype
    Using the abstract data type and
    google api, the function creates
    the map and move it to another
    folder
    """
    gmap.draw("my_map.html")
    os.rename('my_map.html', 'templates/my_map.html')



def buildPolygons():
    """
    (None) -> Nonetype
    Using the abstract data type and
    google api, the function creates
    polylines on the map, which will
    represent the regions of the city
    """
    suhiv_lats, suhiv_lons = zip(*[
        (49.821595, 24.033411),
        (49.821883, 24.034722),
        (49.821911, 24.037168),
        (49.822714, 24.038541),
        (49.819198, 24.041073),
        (49.817412, 24.045773),
        (49.815806, 24.046288),
        (49.815778, 24.046717),
        (49.816277, 24.046760),
        (49.817108, 24.050150),
        (49.817551, 24.051695),
        (49.818243, 24.054871),
        (49.819932, 24.054270),
        (49.820846, 24.055772),
        (49.818326, 24.058390),
        (49.816547, 24.061616),
        (49.815938, 24.061873),
        (49.816193, 24.068104),
        (49.813978, 24.078446),
        (49.809990, 24.080334),
        (49.809464, 24.079948),
        (49.808827, 24.080592),
        (49.807110, 24.078346),
        (49.806030, 24.078732),
        (49.806002, 24.079805),
        (49.804647, 24.081176),
        (49.802985, 24.080532),
        (49.794148, 24.093321),
        (49.782045, 24.101646),
        (49.778969, 24.091347),
        (49.782479, 24.081140),
        (49.783532, 24.079895),
        (49.780872, 24.069081),
        (49.780595, 24.061013),
        (49.780872, 24.054833),
        (49.780734, 24.051829),
        (49.785877, 24.051714),
        (49.785820, 24.049456),
        (49.787226, 24.049156),
        (49.787226, 24.048158),
        (49.788507, 24.047704),
        (49.786803, 24.044322),
        (49.785889, 24.042520),
        (49.785695, 24.041490),
        (49.786794, 24.039716),
        (49.788006, 24.035554),
        (49.777144, 24.031605),
        (49.767997, 24.031519),
        (49.769095, 24.014321),
        (49.783672, 24.014063),
        (49.788596, 24.015007),
        (49.805716, 24.019041),
        (49.818461, 24.020256),
        (49.817742, 24.024763),
        (49.821521, 24.028818),
        (49.822199, 24.032723),
        (49.821595, 24.033411)
        ])
    railway_lats, railway_lons = zip(*[
        (49.844402, 24.011038),
        (49.842816, 24.010352),
        (49.841944, 24.010330),
        (49.840173, 24.011897),
        (49.836793, 24.002599),
        (49.833402, 23.983875),
        (49.831561, 23.973661),
        (49.830269, 23.973218),
        (49.829674, 23.973454),
        (49.828819, 23.974237),
        (49.827891, 23.976082),
        (49.823697, 23.989107),
        (49.821416, 23.988549),
        (49.818807, 23.987599),
        (49.812368, 23.984055),
        (49.809100, 23.982417),
        (49.801756, 23.980478),
        (49.802201, 23.963386),
        (49.805109, 23.961819),
        (49.807382, 23.956227),
        (49.807410, 23.952490),
        (49.808177, 23.952340),
        (49.808822, 23.939916),
        (49.809455, 23.939226),
        (49.809464, 23.932783),
        (49.811035, 23.928480),
        (49.811326, 23.925604),
        (49.811630, 23.923738),
        (49.814303, 23.921785),
        (49.814289, 23.920905),
        (49.815078, 23.919596),
        (49.820451, 23.916229),
        (49.820438, 23.913891),
        (49.821227, 23.912989),
        (49.831814, 23.905780),
        (49.832658, 23.906531),
        (49.836658, 23.916080),
        (49.837544, 23.915737),
        (49.838776, 23.919577),
        (49.839025, 23.921337),
        (49.839108, 23.923182),
        (49.841419, 23.923492),
        (49.841488, 23.922591),
        (49.842913, 23.922012),
        (49.845635, 23.924522),
        (49.851892, 23.915764),
        (49.853054, 23.915743),
        (49.852238, 23.912009),
        (49.853782, 23.911340),
        (49.854224, 23.913056),
        (49.855719, 23.914687),
        (49.858986, 23.914267),
        (49.859276, 23.910319),
        (49.862831, 23.909611),
        (49.862956, 23.911864),
        (49.864325, 23.912421),
        (49.864574, 23.926159),
        (49.864629, 23.938192),
        (49.863965, 23.941630),
        (49.863481, 23.954805),
        (49.858067, 23.971373),
        (49.859146, 23.972623),
        (49.853329, 23.986752),
        (49.852317, 23.988729),
        (49.849591, 23.995004),
        (49.847352, 24.002085),
        (49.846757, 24.004516),
        (49.844363, 24.011011),
        (49.844402, 24.011038)
        ])
    frank_lats, frank_lons = zip(*[
        (49.837014, 24.003926),
        (49.835441, 24.005313),
        (49.834804, 24.007266),
        (49.834547, 24.014453),
        (49.833596, 24.014651),
        (49.832953, 24.015818),
        (49.832219, 24.018260),
        (49.830984, 24.018153),
        (49.828811, 24.018067),
        (49.827787, 24.018818),
        (49.826638, 24.017680),
        (49.825060, 24.020427),
        (49.811915, 24.019429),
        (49.808171, 24.019042),
        (49.805304, 24.018613),
        (49.787841, 24.014569),
        (49.783574, 24.013883),
        (49.783852, 24.012094),
        (49.786429, 24.012631),
        (49.789778, 24.011934),
        (49.791745, 24.011763),
        (49.794337, 24.012337),
        (49.794448, 24.011865),
        (49.795653, 24.011951),
        (49.796054, 24.011350),
        (49.795019, 24.000350),
        (49.796459, 23.995973),
        (49.796556, 23.993806),
        (49.796276, 23.990172),
        (49.797844, 23.986854),
        (49.799617, 23.983743),
        (49.800503, 23.981919),
        (49.800905, 23.981940),
        (49.801314, 23.980730),
        (49.808972, 23.982773),
        (49.812132, 23.984596),
        (49.818758, 23.988040),
        (49.823262, 23.989146),
        (49.824053, 23.989163),
        (49.828314, 23.975327),
        (49.829391, 23.974108),
        (49.831398, 23.973743),
        (49.836610, 24.002574),
        (49.837014, 24.003926)
        ])
    gal_lats, gal_lons = zip(*[
        (49.844347, 24.011282),
        (49.842894, 24.010574),
        (49.841981, 24.010574),
        (49.840140, 24.012183),
        (49.837017, 24.004076),
        (49.835500, 24.005482),
        (49.834923, 24.007519),
        (49.834784, 24.010341),
        (49.834663, 24.014576),
        (49.833773, 24.015009),
        (49.832963, 24.015983),
        (49.832188, 24.018472),
        (49.829008, 24.018354),
        (49.828010, 24.019126),
        (49.826605, 24.018150),
        (49.825145, 24.020821),
        (49.818557, 24.020304),
        (49.817892, 24.024698),
        (49.821595, 24.028647),
        (49.822312, 24.032818),
        (49.821737, 24.033515),
        (49.822014, 24.034556),
        (49.822187, 24.037732),
        (49.822935, 24.038494),
        (49.819368, 24.040954),
        (49.818406, 24.043786),
        (49.817533, 24.045859),
        (49.815883, 24.046374),
        (49.815918, 24.046589),
        (49.816347, 24.046718),
        (49.818250, 24.054595),
        (49.819933 ,24.054184),
        (49.820974, 24.055621),
        (49.822663, 24.053935),
        (49.824892, 24.049172),
        (49.826200, 24.043649),
        (49.828966, 24.037408),
        (49.828911, 24.036711),
        (49.829541, 24.036786),
        (49.829561, 24.038095),
        (49.829741, 24.038299),
        (49.830726, 24.033782),
        (49.831972, 24.034715),
        (49.832228, 24.034329),
        (49.832463, 24.034316),
        (49.832622, 24.033715),
        (49.834525, 24.034252),
        (49.834927, 24.034767),
        (49.836832, 24.034767),
        (49.838822, 24.035239),
        (49.839812, 24.035893),
        (49.839947, 24.039032),
        (49.840493, 24.039107),
        (49.840905, 24.039616),
        (49.842904, 24.040914),
        (49.843173, 24.039438),
        (49.843833, 24.038681),
        (49.844850, 24.038541),
        (49.845375, 24.040172),
        (49.846558, 24.041191),
        (49.845874, 24.044335),
        (49.846102, 24.047015),
        (49.845894, 24.048324),
        (49.846081, 24.048935),
        (49.847957, 24.049492),
        (49.848331, 24.048773),
        (49.848255, 24.046048),
        (49.848724, 24.044990),
        (49.848420, 24.042651),
        (49.848660, 24.042061),
        (49.850599, 24.043542),
        (49.852027, 24.041916),
        (49.850692, 24.033558),
        (49.850367, 24.029771),
        (49.851298, 24.020183),
        (49.850596, 24.020207),
        (49.849877, 24.020508),
        (49.848804, 24.020347),
        (49.847462, 24.020529),
        (49.846651, 24.020250),
        (49.845081, 24.020271),
        (49.843054, 24.020980),
        (49.842590, 24.018501),
        (49.842896, 24.015538),
        (49.844347, 24.011282)
        ])
    tar_lats, tar_lons = zip(*[
        (49.843122, 24.020842),
        (49.842798, 24.018087),
        (49.843019, 24.015733),
        (49.846769, 24.004961),
        (49.847115, 24.003159),
        (49.848097, 24.000648),
        (49.850187, 23.994168),
        (49.853339, 23.987409),
        (49.859290, 23.972730),
        (49.858380, 23.971459),
        (49.863595, 23.955023),
        (49.863893, 23.941686),
        (49.864806, 23.938124),
        (49.864592, 23.912677),
        (49.867330, 23.913021),
        (49.867275, 23.916261),
        (49.873283, 23.916845),
        (49.873500, 23.915341),
        (49.881273, 23.916607),
        (49.880531, 23.932618),
        (49.878581, 23.932918),
        (49.877198, 23.941786),
        (49.877289, 23.943209),
        (49.879308, 23.944261),
        (49.879778, 23.943295),
        (49.881243, 23.944025),
        (49.881064, 23.944990),
        (49.883860, 23.949385),
        (49.878476, 23.966908),
        (49.878089, 23.966951),
        (49.878200, 23.975341),
        (49.877069, 23.976430),
        (49.875589, 23.979091),
        (49.874829, 23.983340),
        (49.873681, 23.983683),
        (49.870860, 23.980246),
        (49.869975, 23.980246),
        (49.869961, 23.978615),
        (49.869256, 23.977564),
        (49.867070, 23.978272),
        (49.865673, 23.980525),
        (49.864595, 23.979903),
        (49.864166, 23.978680),
        (49.858840, 23.984596),
        (49.862843, 23.989446),
        (49.864434, 23.984661),
        (49.864862, 23.985283),
        (49.863368, 23.990197),
        (49.864198, 23.993244),
        (49.872034, 23.989095),
        (49.870540, 24.000425),
        (49.871471, 24.001490),
        (49.872841, 23.998272),
        (49.873889, 23.998422),
        (49.873692, 23.999670),
        (49.876445, 23.999165),
        (49.877112, 24.001008),
        (49.877297, 24.002734),
        (49.881405, 24.009889),
        (49.884295, 24.011125),
        (49.886576, 24.016232),
        (49.886798, 24.018228),
        (49.888194, 24.018335),
        (49.888302, 24.020615),
        (49.895683, 24.019314),
        (49.895849, 24.021460),
        (49.896900, 24.022275),
        (49.895898, 24.029817),
        (49.892603, 24.035080),
        (49.892888, 24.040199),
        (49.891636, 24.042633),
        (49.889853, 24.049436),
        (49.888581, 24.053319),
        (49.887835, 24.053641),
        (49.887129, 24.056366),
        (49.885719, 24.059156),
        (49.883892, 24.059327),
        (49.876799, 24.063233),
        (49.854183, 24.043795),
        (49.853740, 24.041134),
        (49.852009, 24.041606),
        (49.850376, 24.029718),
        (49.851483, 24.019827),
        (49.849989, 24.020127),
        (49.848813, 24.019998),
        (49.847374, 24.020213),
        (49.843122, 24.020842)
        ])
    luch_lats, luch_lons = zip(*[
        (49.839644, 24.036105),
        (49.838703, 24.035611),
        (49.836281, 24.035153),
        (49.834661, 24.035175),
        (49.834412, 24.034663),
        (49.832724, 24.034148),
        (49.832544, 24.034449),
        (49.832129, 24.034835),
        (49.830851, 24.034492),
        (49.829738, 24.038807),
        (49.829365, 24.038485),
        (49.829351, 24.037134),
        (49.826652, 24.043464),
        (49.825115, 24.049214),
        (49.822701, 24.054281),
        (49.818771, 24.058074),
        (49.816708, 24.061722),
        (49.816155, 24.062087),
        (49.816376, 24.068163),
        (49.814072, 24.078086),
        (49.810818, 24.080258),
        (49.810541, 24.086524),
        (49.819010, 24.092060),
        (49.821086, 24.092145),
        (49.821917, 24.093389),
        (49.823162, 24.090900),
        (49.823633, 24.090900),
        (49.825311, 24.088669),
        (49.827194, 24.082939),
        (49.826543, 24.080383),
        (49.826958, 24.078216),
        (49.827692, 24.077787),
        (49.828121, 24.074589),
        (49.828924, 24.073602),
        (49.829292, 24.074268),
        (49.831922, 24.075576),
        (49.830981, 24.083516),
        (49.831950, 24.084417),
        (49.831023, 24.087335),
        (49.831313, 24.088570),
        (49.831784, 24.088957),
        (49.830718, 24.093034),
        (49.831701, 24.094407),
        (49.834261, 24.091875),
        (49.836265, 24.088511),
        (49.837552, 24.085313),
        (49.838922, 24.085421),
        (49.838729, 24.089326),
        (49.838341, 24.094776),
        (49.837525, 24.095077),
        (49.837151, 24.094175),
        (49.836348, 24.094411),
        (49.836002, 24.098145),
        (49.836916, 24.098789),
        (49.833608, 24.106061),
        (49.833484, 24.107864),
        (49.833179, 24.112670),
        (49.837456, 24.112656),
        (49.837511, 24.111884),
        (49.839808, 24.111626),
        (49.841353, 24.118137),
        (49.842779, 24.118288),
        (49.843787, 24.115725),
        (49.844063, 24.112635),
        (49.842508, 24.104672),
        (49.843837, 24.104329),
        (49.846148, 24.095960),
        (49.848097, 24.099005),
        (49.851465, 24.099404),
        (49.852378, 24.093969),
        (49.854151, 24.089468),
        (49.855382, 24.089940),
        (49.859504, 24.082276),
        (49.862395, 24.083821),
        (49.863920, 24.090713),
        (49.865027, 24.087559),
        (49.872391, 24.087467),
        (49.869643, 24.076080),
        (49.874104, 24.077459),
        (49.875773, 24.063975),
        (49.874680, 24.061787),
        (49.853929, 24.044195),
        (49.853435, 24.041674),
        (49.852005, 24.042445),
        (49.850995, 24.043969),
        (49.850395, 24.044158),
        (49.848850, 24.042638),
        (49.848684, 24.045170),
        (49.848720, 24.049759),
        (49.847779, 24.050081),
        (49.845745, 24.048879),
        (49.846229, 24.041522),
        (49.845109, 24.040535),
        (49.844583, 24.039054),
        (49.843974, 24.038947),
        (49.843365, 24.039655),
        (49.843077, 24.041255),
        (49.840797, 24.039955),
        (49.839967, 24.039376),
        (49.839644, 24.036105)
        ])

    gmap.plot(suhiv_lats, suhiv_lons, '#DA70D6', edge_width=4)
    gmap.plot(railway_lats, railway_lons, '#00FF00', edge_width=4)
    gmap.plot(frank_lats, frank_lons, '#8A2BE2', edge_width=4)
    gmap.plot(gal_lats, gal_lons, '#7FFFD4', edge_width=4)
    gmap.plot(tar_lats, tar_lons, '#DAA520', edge_width=4)
    gmap.plot(luch_lats, luch_lons, '#F08080', edge_width=4)

